

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Crucible &mdash; Skyline 1.1.6-beta documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/skyline.styles.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Skyline 1.1.6-beta documentation" href="index.html"/>
        <link rel="next" title="Panorama" href="panorama.html"/>
        <link rel="prev" title="Boundary" href="boundary.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Skyline
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-in-python-virtualenv.html">Running Skyline in a Python virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-data-into-skyline.html">Getting data into Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="alert-testing.html">Alert testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="monotonic-metrics.html">Strictly increasing monotonicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="horizon.html">Horizon</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer.html">Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzer-optimizations.html">Analyzer Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirage.html">Mirage</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary.html">Boundary</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Crucible</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-use-txt-check-files">Why use <cite>.txt</cite> check files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-crucible-does">What <strong>Crucible</strong> does</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="panorama.html">Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapp.html">Webapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="ionosphere.html">Ionosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsfresh.html">tsfresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="redis-integration.html">Redis integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline-and-friends.html">Skyline and friends</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning-tips.html">Tuning tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning-tips.html#smaller-deployments">Smaller deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning-tips.html#reliability">Reliability</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-skyline.html">Monitoring Skyline</a></li>
<li class="toctree-l1"><a class="reference internal" href="debian-and-vagrant-installation-tips.html">Debian and Vagrant Installation Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What&#8217;s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyline.html">skyline package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Skyline</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Crucible</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/crucible.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="crucible">
<h1>Crucible<a class="headerlink" href="#crucible" title="Permalink to this headline">¶</a></h1>
<p>Crucible is an extension of Skyline based on Abe Stanway&#8217;s
<a class="reference external" href="https://github.com/astanway/crucible">Crucible</a> testing suite.  Crucible has
been integrated into Skyline as a module and daemon to allow for the following:</p>
<ul class="simple">
<li>Allowing for the ad-hoc analysis of a timeseries and generation of resultant
resources (e.g. plot images, etc).</li>
<li>Allowing for the ad-hoc analysis of a timeseries by a specific or adhoc
defined algorithma nd generation of resultant resources (e.g. plot images,
etc).</li>
<li>For storing the individual timeseries data for triggered anomalies.</li>
</ul>
<p>Be forewarned that Crucible can generated a substantial amount of data in the
timeseries json archives, especially if it is enabled in any of the following
contexts:</p>
<ul class="simple">
<li><a class="reference internal" href="skyline.html#settings.ANALYZER_CRUCIBLE_ENABLED" title="settings.ANALYZER_CRUCIBLE_ENABLED"><code class="xref py py-mod docutils literal"><span class="pre">settings.ANALYZER_CRUCIBLE_ENABLED</span></code></a></li>
<li><a class="reference internal" href="skyline.html#settings.MIRAGE_CRUCIBLE_ENABLED" title="settings.MIRAGE_CRUCIBLE_ENABLED"><code class="xref py py-mod docutils literal"><span class="pre">settings.MIRAGE_CRUCIBLE_ENABLED</span></code></a></li>
<li><a class="reference internal" href="skyline.html#settings.BOUNDARY_CRUCIBLE_ENABLED" title="settings.BOUNDARY_CRUCIBLE_ENABLED"><code class="xref py py-mod docutils literal"><span class="pre">settings.BOUNDARY_CRUCIBLE_ENABLED</span></code></a></li>
</ul>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Crucible is not necessarily meant for generic Analyzer, Mirage or Boundary
inputs although it does works and was patterned using data fed to it from
Analyzer.  Crucible is more aimed and having the ability to add miscellaneous
timeseries and algorithms in an ad-hoc manner.  Enabling the use of data
sources other than Graphite and Redis data and testing alogrithms in an ad-hoc
manner too.</p>
<p>Crucible is enabled by default in its own settings block in <code class="docutils literal"><span class="pre">settings.py</span></code>, but
it disabled default in each of the apps own settings.</p>
<div class="section" id="why-use-txt-check-files">
<h3>Why use <cite>.txt</cite> check files<a class="headerlink" href="#why-use-txt-check-files" title="Permalink to this headline">¶</a></h3>
<p>The rationale behind offloading checks.</p>
<p>A number of the Skyline daemons create txt check and metadata files, and json
timeseries files.</p>
<p>For example Analyzer creates txt check files for Mirage, Crucible and Panorama.
These txt files are created in logical directory structures that mirror
Graphite&#8217;s whisper storage directories for stats, etc.  Often other timeseries
data sets that are not Graphite, machine or app related metrics, are also
structured in a directory or tree structure and follow similar naming
convention, which allows for this tree and txt files design to work with a large
number of other timeseries data sets too.</p>
<p>Although there is an argument that checks and their related metadata could also
be queued through Redis or another queue application, using the local filesystem
is the simplest method to pass data between the Skyline modules, without
introducing additional dependencies.</p>
<p>While ensuring that Redis is being queried as minimally as required to do
analysis.  The shuffling of data and querying of &#8220;queues&#8221; is offloaded to the
filesystem.  Resulting in each module being somewhat autonomous in terms of
managing its own work, decoupled from the other modules.</p>
<p>Today&#8217;s filesystems are more than capable of handling this load.  The use of txt
files also provides an event history, which transient Redis data does not.</p>
<p>Importantly in terms of Crucible ad-hoc testing, txt and json timeseries files
provide a simple and standardised method to push ad-hoc checks into Crucible.</p>
</div>
</div>
<div class="section" id="what-crucible-does">
<h2>What <strong>Crucible</strong> does<a class="headerlink" href="#what-crucible-does" title="Permalink to this headline">¶</a></h2>
<p>Crucible has 3 roles:</p>
<ol class="arabic simple">
<li>Store resources (timeseries json and graph pngs) for triggered anomalies.</li>
<li>Run ad-hoc analysis on any timeseries and create matplotlib plots for the
run algorithms.</li>
<li>To update the Panorama database (tbd for future Panorama branch)</li>
</ol>
<p>Crucible can be used to analyse any triggered anomaly on an ad-hoc basis.  The
timeseries is stored in gzipped json for triggered anomalies so that
retrospective full analysis can be carried out on a snapshot of the timeseries
as it was when the trigger/s fired without the timeseries being changed by
aggregation and retention operations.</p>
<p>Crucible can create a large amount of data files and require significant disk
space.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="panorama.html" class="btn btn-neutral float-right" title="Panorama" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="boundary.html" class="btn btn-neutral" title="Boundary" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2014, Etsy Inc; 2015, Abe Stanway; 2015-2017, Gary Wilson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.6-beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>